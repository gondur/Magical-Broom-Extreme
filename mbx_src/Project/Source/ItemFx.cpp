//======================================================================================
//======================================================================================
//
//
//			アイテム取得エフェクト
//
//
//======================================================================================
//======================================================================================


//======================================================================================
//	include
//======================================================================================
#include "ItemFx.h"


//======================================================================================
//
//	コンストラクタ
//
//======================================================================================
CITEMFX::CITEMFX( float x, float y, long no ) : CSPRITE( SORT_NULL )
{
	Px = x;
	Py = y;
	No = no;
}

//======================================================================================
//
//	処理
//
//======================================================================================
bool CITEMFX::Action( void )
{
	long alpha = LunaMath::FlatSpeed( 255L, 0L, 60, Time );
	long sx = LunaMath::FlatSpeed( 32L, 128L, 60, Time );
	long sy = LunaMath::FlatSpeed(  8L,  32L, 60, Time );

	if ( ++Time == 60 ) return true;

	//-------------------------------------------
	// 描画処理
	//-------------------------------------------
	RECT src = { 704, 662+No*18, 704+64, 662+No*18+18 };
	RECT dest = { (long)Px-sx, (long)Py-sy, (long)Px+sx, (long)Py+sy };
	Sprite[7][0]->Draw( &dest, D3DCOLOR_ARGB(alpha,255,255,255), &src );

	return bDeath;
}